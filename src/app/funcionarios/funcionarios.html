<!-- Cabeçalho da Página -->
<div class="page-header">
  <div class="container">
    <h1 class="page-title">
      <i class="fa fa-users me-3"></i>
      Consulta de Funcionários
    </h1>
    <p class="page-subtitle">Gerencie e visualize todos os funcionários cadastrados</p>
  </div>
</div>

<!-- Conteúdo Principal -->
<div class="container main-container">

  <!-- Botão Novo Funcionário -->
  <div class="action-bar">
    <button type="button" class="btn btn-success btn-add" routerLink="/funcionarios/cadastrar">
      <i class="fa fa-plus me-2"></i>
      Novo Funcionário
    </button>
  </div>

  <!-- Formulário de Filtros -->
  <form (ngSubmit)="listarFuncionarios()">

    <!-- Card de Filtros -->
    <div class="filter-card">
      <div class="filter-header d-flex justify-content-between align-items-center">
        <div>
          <i class="fa fa-filter me-2"></i>
          <span>Filtros de Busca</span>
        </div>
        <button type="submit" class="btn btn-primary btn-search" title="Buscar">
          <i class="fa fa-search"></i>
        </button>
      </div>

      <div class="filter-body mt-3">
        <div class="row g-3 align-items-end">

          <!-- Nome -->
          <div class="col-lg-2 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-user me-1"></i>
              Nome
            </label>
            <input class="form-control" type="text" [(ngModel)]="filtro.nome" name="nome" placeholder="Digite o nome">
          </div>

          <!-- Cargo -->
          <div class="col-lg-1 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-briefcase me-1"></i>
              Cargo
            </label>
            <select class="form-select" [(ngModel)]="filtro.cargo" name="cargo">
              <option value="">Todos</option>
              <option *ngFor="let c of cargos" [value]="c">{{ c }}</option>
            </select>
          </div>

          <!-- Telefone -->
          <div class="col-lg-2 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-phone me-1"></i>
              Telefone
            </label>
            <input class="form-control" type="text" mask="(00) 00000-0000" [(ngModel)]="filtro.telefone"
              name="telefone" placeholder="(00) 00000-0000">
          </div>

          <!-- Email -->
          <div class="col-lg-2 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-envelope me-1"></i>
              Email
            </label>
            <input class="form-control" type="text" [(ngModel)]="filtro.email" name="email"
              placeholder="exemplo@email.com">
          </div>

          <!-- Início Cadastro -->
          <div class="col-lg-2 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-calendar me-1"></i>
              Início Cadastro
            </label>
            <input class="form-control" type="date" [(ngModel)]="filtro.dataInicioCadastro"
              name="dataInicioCadastro">
          </div>

          <!-- Fim Cadastro -->
          <div class="col-lg-2 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-calendar me-1"></i>
              Fim Cadastro
            </label>
            <input class="form-control" type="date" [(ngModel)]="filtro.dataFimCadastro"
              name="dataFimCadastro">
          </div>

          <!-- Ativo -->
          <div class="col-lg-1 col-md-6 col-sm-12">
            <label class="form-label">
              <i class="fa fa-toggle-on me-1"></i>
              Ativo
            </label>
            <select class="form-select" [(ngModel)]="filtro.ativo" name="ativo">
              <option value="">Todos</option>
              <option value="true">Sim</option>
              <option value="false">Não</option>
            </select>
          </div>

        </div>
      </div>
    </div>

    <!-- Tabela de Funcionários -->
    <div class="table-card">
      <div class="table-header">
        <i class="fa fa-table me-2"></i>
        <span>Lista de Funcionários</span>
        <span class="badge bg-primary ms-2">{{ funcionarios.length || 0 }}</span>
      </div>

      <div class="table-responsive">
        <table class="table table-modern">
          <thead>
            <tr>
              <th><i class="fa fa-user me-2"></i>Nome</th>
              <th><i class="fa fa-briefcase me-2"></i>Cargo</th>
              <th><i class="fa fa-envelope me-2"></i>Email</th>
              <th><i class="fa fa-phone me-2"></i>Telefone</th>
              <th><i class="fa fa-birthday-cake me-2"></i>Data de Nascimento</th>
              <th class="text-center"><i class="fa fa-toggle-on me-2"></i>Status</th>
              <th class="text-center"><i class="fa fa-cog me-2"></i>Ações</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let f of funcionarios" class="table-row">

              <!-- Nome -->
              <td>
                <input class="form-control form-control-sm" [(ngModel)]="f.nome" name="nome{{f.id}}" />
              </td>

              <!-- Cargo -->
              <td>
                <select class="form-select form-select-sm" [(ngModel)]="f.cargo" name="cargo{{f.id}}">
                  <option *ngFor="let c of cargos" [value]="c">{{c}}</option>
                </select>
              </td>

              <!-- Email -->
              <td>
                <input class="form-control form-control-sm" [(ngModel)]="f.email" name="email{{f.id}}" />
              </td>

              <!-- Telefone -->
              <td>
                <input class="form-control form-control-sm" mask="(00) 00000-0000" [(ngModel)]="f.telefone"
                  name="telefone{{f.id}}" />
              </td>

              <!-- Data de Nascimento -->
              <td>
                <input class="form-control form-control-sm" type="date" [(ngModel)]="f.dataNascimento"
                  name="dataNascimento{{f.id}}" style="padding-right: 80px;"/>
              </td>

              <!-- Status -->
              <td class="text-center">
                <span class="status-badge" [class.status-active]="f.ativo" [class.status-inactive]="!f.ativo">
                  <i class="fa" [ngClass]="f.ativo ? 'fa-check-circle' : 'fa-times-circle'"></i>
                  {{f.ativo ? 'Ativo' : 'Inativo'}}
                </span>
              </td>

              <!-- Ações -->
              <td class="text-center">
                <div class="btn-group-actions">
                  <button class="btn btn-icon btn-warning" (click)="editarFuncionario(f)" title="Salvar alterações">
                    <i class="fa fa-save"></i>
                  </button>
                  <button *ngIf="f.ativo" class="btn btn-icon btn-danger" (click)="desativarFuncionario(f.id)"
                    title="Desativar funcionário">
                    <i class="fa fa-user-slash"></i>
                  </button>
                  <button *ngIf="!f.ativo" class="btn btn-icon btn-success" (click)="reativarFuncionario(f.id)"
                    title="Reativar funcionário">
                    <i class="fa fa-user-check"></i>
                  </button>
                </div>
              </td>

            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </form>
</div>
